<div class="contenedor-cetes glass-card">
  <h2 class="titulo">CETES</h2>

  <!-- Paso 1: Selecci√≥n -->
  <div *ngIf="!plazoSeleccionado">
    <h4 class="subtitulo">Selecciona el plazo</h4>
    <ul class="lista-plazos">
      <li *ngFor="let p of plazos" (click)="seleccionar(p)">
        <strong>CETES</strong><br />
        <small>{{ p.tasa }}</small><br />
        <span class="plazo">{{ p.plazo }}</span>
      </li>
    </ul>
  </div>

  <!-- Paso 2: Formulario de compra -->
  <div *ngIf="plazoSeleccionado && !confirmar" class="formulario-compra">
    <h4 class="subtitulo">Compra de instrumento</h4>
    <p><strong>Plazo:</strong> {{ plazoSeleccionado.plazo }}</p>
    <p><strong>Tasa Indicativa:</strong> {{ plazoSeleccionado.tasa }}</p>
    <p><strong>Fecha de subasta:</strong> {{ fechaSubasta }}</p>

    <label for="monto">Monto de la compra:</label>
    <input id="monto" type="number" placeholder="Ej. 10000" [(ngModel)]="monto" />

    <div class="reinv">
      <label>¬øReinvertir al vencimiento?</label>
      <button [class.activo]="reinversion" (click)="reinversion = true">S√≠</button>
      <button [class.activo]="!reinversion" (click)="reinversion = false">No</button>
    </div>

    <div class="acciones">
      <button class="btn-cancelar" (click)="reiniciar()">Cancelar</button>
      <button class="btn-continuar" (click)="continuarCompra()">Aceptar</button>
    </div>
  </div>

  <!-- Paso 3: Confirmaci√≥n -->
  <div *ngIf="confirmar" class="confirmacion glass-card">
    <h4>‚úÖ Confirmaci√≥n de compra</h4>
    <p>Su transacci√≥n se registr√≥ exitosamente.</p>
    <ul>
      <li><strong>Instrumento:</strong> CETES</li>
      <li><strong>Fecha de compra:</strong> {{ fechaSubasta | date:'dd/MM/yyyy' }}</li>
      <li><strong>Plazo de inversi√≥n:</strong> {{ plazoSeleccionado?.plazo }}</li>
      <li><strong>Reinversi√≥n autom√°tica:</strong> {{ reinversion ? 'S√ç' : 'NO' }}</li>
      <li><strong>Forma de pago:</strong> Fondos en cuenta</li>
    </ul>
    <button class="btn-cancelar" (click)="reiniciar()">Inicio</button>

    <!-- Tabla de movimientos -->
    <div *ngIf="movimientos.length > 0" class="tabla-movimientos">
      <h4>üìã Historial de movimientos</h4>
      <table>
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Monto</th>
            <th>Fecha</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let mov of movimientos">
            <td>{{ mov.tipo }}</td>
            <td>${{ mov.monto }}</td>
            <td>{{ mov.fecha | date:'dd/MM/yyyy HH:mm' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
